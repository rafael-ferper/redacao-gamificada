{"version":3,"sources":["../src/drop-snippet-dialogue.js"],"names":["define","Templates","DialogueBase","Dialog","drop","warnings","altSnippetMaker","_drop","_warnings","_altSnippetMaker","setTitle","get","prototype","constructor","apply","Object","create","_render","context","getData","dropjson","JSON","stringify","item","getItem","itemjson","altsnippetmaker","haswarnings","length","render","then","html","js","_setDialogueContent","center","runTemplateJS","bind"],"mappings":"AAuBAA,OAAM,qCAAC,CACH,gBADG,CAEH,2BAFG,CAAD,CAGH,SAASC,CAAT,CAAoBC,CAApB,CAAkC,CASjC,QAASC,CAAAA,CAAT,CAAgBC,CAAhB,CAAsBC,CAAtB,CAAgCC,CAAhC,CAAiD,CAC7C,KAAKC,KAAL,CAAaH,CAAb,CACA,KAAKI,SAAL,CAAiBH,CAAjB,CACA,KAAKI,gBAAL,CAAwBH,CAAxB,CACA,KAAKI,QAAL,CAAcN,CAAI,CAACO,GAAL,CAAS,MAAT,CAAd,EACAT,CAAY,CAACU,SAAb,CAAuBC,WAAvB,CAAmCC,KAAnC,CAAyC,IAAzC,CAA+C,EAA/C,CACH,CACDX,CAAM,CAACS,SAAP,CAAmBG,MAAM,CAACC,MAAP,CAAcd,CAAY,CAACU,SAA3B,CAAnB,CACAT,CAAM,CAACS,SAAP,CAAiBC,WAAjB,CAA+BV,CAA/B,CAEAA,CAAM,CAACS,SAAP,CAAiBL,KAAjB,CAAyB,IAAzB,CACAJ,CAAM,CAACS,SAAP,CAAiBH,gBAAjB,CAAoC,IAApC,CACAN,CAAM,CAACS,SAAP,CAAiBJ,SAAjB,CAA6B,IAA7B,CAQAL,CAAM,CAACS,SAAP,CAAiBK,OAAjB,CAA2B,UAAW,CAClC,GAAIC,CAAAA,CAAO,CAAG,CACVd,IAAI,CAAE,KAAKG,KAAL,CAAWY,OAAX,EADI,CAEVC,QAAQ,CAAEC,IAAI,CAACC,SAAL,CAAe,KAAKf,KAAL,CAAWY,OAAX,EAAf,CAFA,CAGVI,IAAI,CAAE,KAAKhB,KAAL,CAAWiB,OAAX,GAAqBL,OAArB,EAHI,CAIVM,QAAQ,CAAEJ,IAAI,CAACC,SAAL,CAAe,KAAKf,KAAL,CAAWiB,OAAX,GAAqBL,OAArB,EAAf,CAJA,CAKVO,eAAe,CAAE,KAAKjB,gBALZ,CAMVJ,QAAQ,CAAE,KAAKG,SANL,CAOVmB,WAAW,CAAE,KAAKnB,SAAL,EAAkB,KAAKA,SAAL,CAAeoB,MAPpC,CAAd,CASA,MAAO3B,CAAAA,CAAS,CAAC4B,MAAV,CAAiB,mCAAjB,CAAsDX,CAAtD,EACNY,IADM,CACD,SAASC,CAAT,CAAeC,CAAf,CAAmB,CACrB,KAAKC,mBAAL,CAAyBF,CAAzB,EACA,KAAKG,MAAL,GACAjC,CAAS,CAACkC,aAAV,CAAwBH,CAAxB,CACH,CAJK,CAIJI,IAJI,CAIC,IAJD,CADC,CAMV,CAhBD,CAkBA,MAA8DjC,CAAAA,CAEjE,CApDK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Drop snippet dialogue module.\n *\n * @package    block_stash\n * @copyright  2016 Frédéric Massart - FMCorz.net\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\n    'core/templates',\n    'block_stash/dialogue-base'\n], function(Templates, DialogueBase) {\n\n    /**\n     * Snippet dialogue class.\n     *\n     * @param {Drop} drop The drop.\n     * @param {Array} warnings List of warnings.\n     * @param {String} altSnippetMaker The name of the alternat snippet maker module.\n     */\n    function Dialog(drop, warnings, altSnippetMaker) {\n        this._drop = drop;\n        this._warnings = warnings;\n        this._altSnippetMaker = altSnippetMaker;\n        this.setTitle(drop.get('name'));\n        DialogueBase.prototype.constructor.apply(this, []);\n    }\n    Dialog.prototype = Object.create(DialogueBase.prototype);\n    Dialog.prototype.constructor = Dialog;\n\n    Dialog.prototype._drop = null;\n    Dialog.prototype._altSnippetMaker = null;\n    Dialog.prototype._warnings = null;\n\n    /**\n     * Render the dialogue.\n     *\n     * @method _render\n     * @return {Promise}\n     */\n    Dialog.prototype._render = function() {\n        var context = {\n            drop: this._drop.getData(),\n            dropjson: JSON.stringify(this._drop.getData()),\n            item: this._drop.getItem().getData(),\n            itemjson: JSON.stringify(this._drop.getItem().getData()),\n            altsnippetmaker: this._altSnippetMaker,\n            warnings: this._warnings,\n            haswarnings: this._warnings && this._warnings.length,\n        };\n        return Templates.render('block_stash/drop_snippet_dialogue', context)\n        .then(function(html, js) {\n            this._setDialogueContent(html);\n            this.center();\n            Templates.runTemplateJS(js);\n        }.bind(this));\n    };\n\n    return /** @alias module:block_stash/drop-snippet-dialogue */ Dialog;\n\n});\n"],"file":"drop-snippet-dialogue.min.js"}