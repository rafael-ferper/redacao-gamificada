{"version":3,"sources":["../src/item-selector-dialogue.js"],"names":["define","$","DialogueBase","Templates","Ajax","Str","ItemSelector","userid","courseid","sesskey","warnings","_userid","_courseid","_sesskey","_warnings","prototype","constructor","apply","Object","create","_render","ajaxpromise","call","methodname","args","stringpromise","get_string","when","then","ajaxvalues","stringvalues","context","items","render","html","js","setTitle","_setDialogueContent","center","runTemplateJS"],"mappings":"AAuBAA,OAAM,sCAAC,CACH,QADG,CAEH,2BAFG,CAGH,gBAHG,CAIH,WAJG,CAKH,UALG,CAAD,CAMH,SAASC,CAAT,CAAYC,CAAZ,CAA0BC,CAA1B,CAAqCC,CAArC,CAA2CC,CAA3C,CAAgD,CAU/C,QAASC,CAAAA,CAAT,CAAsBC,CAAtB,CAA8BC,CAA9B,CAAwCC,CAAxC,CAAiDC,CAAjD,CAA2D,CACvD,KAAKC,OAAL,CAAeJ,CAAf,CACA,KAAKK,SAAL,CAAiBJ,CAAjB,CACA,KAAKK,QAAL,CAAgBJ,CAAhB,CACA,KAAKK,SAAL,CAAiBJ,CAAjB,CACAR,CAAY,CAACa,SAAb,CAAuBC,WAAvB,CAAmCC,KAAnC,CAAyC,IAAzC,CAA+C,EAA/C,CACH,CACDX,CAAY,CAACS,SAAb,CAAyBG,MAAM,CAACC,MAAP,CAAcjB,CAAY,CAACa,SAA3B,CAAzB,CACAT,CAAY,CAACS,SAAb,CAAuBC,WAAvB,CAAqCV,CAArC,CAEAA,CAAY,CAACS,SAAb,CAAuBJ,OAAvB,CAAiC,IAAjC,CACAL,CAAY,CAACS,SAAb,CAAuBH,SAAvB,CAAmC,IAAnC,CACAN,CAAY,CAACS,SAAb,CAAuBF,QAAvB,CAAkC,IAAlC,CACAP,CAAY,CAACS,SAAb,CAAuBD,SAAvB,CAAmC,IAAnC,CAQAR,CAAY,CAACS,SAAb,CAAuBK,OAAvB,CAAiC,UAAW,YAGpCC,CAAW,CAAGjB,CAAI,CAACkB,IAAL,CAAU,CAAC,CACzBC,UAAU,CAAE,uBADa,CAEzBC,IAAI,CAAE,CACFhB,QAAQ,CAAE,KAAKI,SADb,CAFmB,CAAD,CAAV,CAHsB,CASpCa,CAAa,CAAGpB,CAAG,CAACqB,UAAJ,CAAe,SAAf,CAA0B,aAA1B,CAToB,CAUxC,MAAOzB,CAAAA,CAAC,CAAC0B,IAAF,CAAON,CAAW,CAAC,CAAD,CAAlB,CAAuBI,CAAvB,EAAsCG,IAAtC,CAA2C,SAACC,CAAD,CAAaC,CAAb,CAA8B,CAC5E,GAAIC,CAAAA,CAAO,CAAG,CACVxB,MAAM,CAAE,CAAI,CAACI,OADH,CAEVH,QAAQ,CAAE,CAAI,CAACI,SAFL,CAGVoB,KAAK,CAAEH,CAAU,CAACG,KAHR,CAIVvB,OAAO,CAAE,CAAI,CAACI,QAJJ,CAKVH,QAAQ,CAAE,CAAI,CAACI,SALL,CAAd,CAOAX,CAAS,CAAC8B,MAAV,CAAiB,kCAAjB,CAAqDF,CAArD,EAA8DH,IAA9D,CAAmE,SAACM,CAAD,CAAOC,CAAP,CAAc,CAC7E,CAAI,CAACC,QAAL,CAAcN,CAAd,EACA,CAAI,CAACO,mBAAL,CAAyBH,CAAzB,EACA,CAAI,CAACI,MAAL,GACAnC,CAAS,CAACoC,aAAV,CAAwBJ,CAAxB,CACH,CALD,CAMH,CAdM,CAeV,CAzBD,CA2BA,MAA8D7B,CAAAA,CAEjE,CAlEK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Dialogue for picking an item\n *\n * @package    block_stash\n * @copyright  2019 Adrian Greeve <adriangreeve.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\n    'jquery',\n    'block_stash/dialogue-base',\n    'core/templates',\n    'core/ajax',\n    'core/str'\n], function($, DialogueBase, Templates, Ajax, Str) {\n\n    /**\n     * A dialogue to show a user's item\n     *\n     * @param {int} userid The user id.\n     * @param {int} courseid The course id.\n     * @param {string} sesskey Session key.\n     * @param {Array} warnings List of warnings.\n     */\n    function ItemSelector(userid, courseid, sesskey, warnings) {\n        this._userid = userid;\n        this._courseid = courseid;\n        this._sesskey = sesskey;\n        this._warnings = warnings;\n        DialogueBase.prototype.constructor.apply(this, []);\n    }\n    ItemSelector.prototype = Object.create(DialogueBase.prototype);\n    ItemSelector.prototype.constructor = ItemSelector;\n\n    ItemSelector.prototype._userid = null;\n    ItemSelector.prototype._courseid = null;\n    ItemSelector.prototype._sesskey = null;\n    ItemSelector.prototype._warnings = null;\n\n    /**\n     * Render the ItemSelector.\n     *\n     * @method _render\n     * @return {Promise}\n     */\n    ItemSelector.prototype._render = function() {\n\n        // Need to go fetch all items for display.\n        var ajaxpromise = Ajax.call([{\n            methodname: 'block_stash_get_items',\n            args: {\n                courseid: this._courseid\n            }\n        }]);\n        var stringpromise = Str.get_string('additem', 'block_stash');\n        return $.when(ajaxpromise[0], stringpromise).then((ajaxvalues, stringvalues) => {\n            var context = {\n                userid: this._userid,\n                courseid: this._courseid,\n                items: ajaxvalues.items,\n                sesskey: this._sesskey,\n                warnings: this._warnings\n            };\n            Templates.render('block_stash/item_select_dialogue', context).then((html, js) => {\n                this.setTitle(stringvalues);\n                this._setDialogueContent(html);\n                this.center();\n                Templates.runTemplateJS(js);\n            });\n        });\n    };\n\n    return /** @alias module:block_stash/drop-snippet-dialogue */ ItemSelector;\n\n});"],"file":"item-selector-dialogue.min.js"}