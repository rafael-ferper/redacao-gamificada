define ("block_stash/trade",["jquery","core/ajax","core/log","block_stash/base","block_stash/counselor","block_stash/trade-dialogue","block_stash/item","block_stash/user-item"],function(a,b,c,d,e,f,g,h){function i(a){d.prototype.constructor.apply(this,[a])}i.prototype=Object.create(d.prototype);i.prototype.EVENT_TRADE="trade:pickedup";i.prototype.do=function(){return b.call([{methodname:"block_stash_complete_trade",args:{tradeid:this.get("id"),hashcode:this.get("hashcode")}}])[0].fail(function(){c.debug("The trade could not be completed.")}).then(function(a){if(a){for(var b in a.gaineditems){var c=new h(a.gaineditems[b].useritem,new g(a.gaineditems[b].item));e.trigger(this.EVENT_TRADE,{id:this.get("id"),hashcode:this.get("hashcode"),useritem:c})}for(var b in a.removeditems){var c=new h(a.removeditems[b].useritem,new g(a.removeditems[b].item));e.trigger(this.EVENT_TRADE,{id:this.get("id"),hashcode:this.get("hashcode"),useritem:c})}}}.bind(this))};return i});
//# sourceMappingURL=trade.min.js.map
